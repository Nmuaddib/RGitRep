{
    "collab_server" : "",
    "contents" : "###---------------------------------------------------------\nlibrary(\"reshape2\", lib.loc=\"~/R/win-library/3.4\")\n#library(\"tidyverse\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"readxl\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"qcc\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"modelr\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"dplyr\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"ggplot2\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"readr\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"tibble\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"tidyr\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"purrr\", lib.loc=\"~/R/win-library/3.4\")\n#library(\"psych\", lib.loc=\"~/R/win-library/3.4\")\nlibrary(\"forcats\", lib.loc=\"~/R/win-library/3.4\")\n####---------------------------------------------------------\nwrite.csv2(dataset2, \"dataset2.csv\")\nwrite.csv2(dataset, \"dataset.csv\")\nsave.image(\"~/Analise_Componente_atend.RData\")\n####---------------------------------------------------------\nCAI_G[,-4] #select(CAI_G, -valor)\nView(filter(CAI_GQS,amq>=\"20140101\"))\ndepara_componente <- read_excel('depara_componente.xlsx')\n\n#rm()\n\norg <- read_excel('CAIv2.xlsx')\n####---------------------------------------------------------\ncai <- read_excel('CAIv2.xlsx') %>% # readxl: import\n  group_by(componente,internacao,amq) %>% # dplyr: group\n  summarise(valor = sum(valor), qt = sum(quantidade)) %>% # dplyr: sum by groupped beforehand\n  select(-valor) %>% # dplyr: drop a column\n  spread(componente,qt) %>% # tidyr: change from \"key value\" to columns\n  arrange(amq, internacao) %>%  # dplyr: re-order to make row selection simpler\n  filter(amq>=\"20140101\") # dplyr: select row for analysis\n\nView(cai)\n####---------------------------------------------------------\nnames(cai)\n?split\n?as.factor\n\ncai_splt <- split(cai, as.factor(cai$internacao))\ncai_splt <- cai %>% split(.$internacao)\ncai_splt[[1]][1,2]\n\nView(cai_splt)\nsummary(cai_splt)\nnames(cai_splt[[1]])\n####---------------------------------------------------------\ncai\n\ncai_df <- cai %>% \n  as.data.frame(.) %>% \n  as.tibble()\n\ncai_df\n####---------------------------------------------------------\ncai_SCs <- cai_df %>%\n  filter(internacao == \"s\") %>% \n  arrange(amq) %>% \n  select(sadt) %>% \n  as.tibble()\n\ncai_temp <- cai_df %>%\n  filter(internacao == \"n\") %>% \n  arrange(amq) %>% \n  select(consulta) %>% \n  as.tibble()\n  \ncai_SCs <- cai_SCs %>% add_column(consulta = cai_temp$consulta)\n####---------------------------------------------------------\ncai_SCn <- cai_df %>%\n  filter(internacao == \"n\") %>% \n  arrange(amq) %>% \n  select(sadt) %>% \n  as.tibble()\n\ncai_SCn <- cai_SCn %>% add_column(consulta = cai_temp$consulta)\n####---------------------------------------------------------\nrm(cai_SCc)\n                       \ncai_SCc <- cai_df %>% \n  select(amq,sadt) %>% \n  group_by(amq) %>% \n  summarise(sadt=sum(sadt)) %>% \n  as.data.frame(.) %>% \n  select(sadt) %>% \n  as.tibble()     \n\nzSc <- scale(cai_SCc$sadt, center = TRUE, scale = TRUE) #z, p for sigmas\ncai_SCc <- cai_SCc %>% add_column(consulta = cai_temp$consulta, z = zSc[1:dim(cai_SCc)[1]]) \n#%>% filter(!abs(z) > 2.5)\n####---------------------------------------------------------\n\ndim(cai_SCc)[1] # length of a tibble\n\ncai_SCc\n\ncai_g <- cai_SCc %>% \n  select(consulta,sadt) %>% \n  add_column(sadt_n = cai_SCn$sadt) %>% \n  add_column(sadt_s = cai_SCs$sadt)\n\nplot(cai_g)\n####---------------------------------------------------------\n## check regress\nlm(sadt ~ consulta, data = cai_SCc) %>% \n  summary()\n\n## fit model\nlm.cai_SCc <- lm(sadt ~consulta, data = cai_SCc)\n\n## add fiited column\ncai_SCc <- cai_SCc %>% add_predictions(lm.cai_SCc) #modelr lib\n\n## check model X scatter\nggplot(cai_SCc, aes(y = consulta)) +\n  geom_point(aes(x = sadt), color = \"blue\", alpha = 0.5, size = 3) +\n  geom_line(aes(x = pred),color = \"red\", size = 1.2)\n\n## check model with the 4 standards\npar(mfrow = c(2,2), oma = c(0, 0, 1.1, 0))\nplot(lm.cai_SCc)\npar(mfrow = c(1,1), oma = c(0, 0, 0, 0))\n\n## limits for fitted\npredict.lm(lm.cai_SCc, level=0.95, interval = 'confidence')\n\nrm(SCc.CI)\nSCc.CI <- as.tibble(predict.lm(lm.cai_SCc, level=0.99, interval = 'confidence'))\nSCc.CI <- add_column(SCc.CI, rn = as.numeric(row.names(SCc.CI)))\ncai_SCc <- add_column(cai_SCc, rn = as.numeric(row.names(SCc.CI)))\nView(SCc.CI)\n\nggplot(SCc.CI, aes(x = rn, y = fit, col = fit)) +\n  geom_point(size = 2) +\n  geom_errorbar(aes(ymax = upr, ymin = lwr)) +\n  geom_line(color = \"red\", size = 0.4, alpha = 0.5) +\n  geom_point(data = cai_SCc, aes(y = sadt),col = \"orange\" , size = 2)\n\ncai_SCc\n\nplotCI(SCc.CI$fit[1:3], ui = SCc.CI$upr[1:3], li = SCc.CI$lwr[1:3], ylab = NULL, xlab = NULL)\n####---------------------------------------------------------\n\n## check range within 99% of dist\nt.test(cai_SCc$sadt, fitted(lm.cai_SCc), conf.level = 0.95)\n\n## check range for the 99% conf. for the model\nt.test(fitted(lm.cai_SCc), conf.level = 0.95) #confidence for the model\nconfint(lm.cai_SCc, level=0.95)\n\n## plot model\nplot(fitted(lm.cai_SCc))\n\n## standard hists for model and actual\nhist(fitted(lm.cai_SCc))\nhist(cai_SCc$sadt)\n\n## CEP to check the model, results are poor in this case\nqcc.cai_SCc <- qcc(cai_SCc$sadt, type = 'xbar.one', newdata = fitted(lm.cai_SCc))\n\n## extra hist and density with CEP/qcc\nprocess.capability (qcc.cai_SCc, spec.limits=c(400000,700000))\n\n## default summary to check min and max\nsummary(cai_SCc$sadt)\n\n## ggplot hist\nggplot(cai_SCc,aes(sadt)) +\n  stat_bin(aes(y =..density..,\n               fill = ..count..), \n           col = \"black\",\n           binwidth = 35000, \n           alpha = 0.8) +\n  geom_density(fill = \"red\",\n               color = \"red\",\n               alpha = 0.11) +\n  scale_x_continuous(breaks = seq(200000, 800000, by = 100000)) +\n  scale_y_continuous(labels = NULL) +\n  labs(title = 'Hist', x = 'SADT', y = 'Count') #+ \n#xlim(c(260000,780000))\n\nggplot(cai_SCc,aes(pred)) +\n  stat_bin(aes(y =..density..,\n               fill = ..count..), \n           col = \"black\",\n           binwidth = 35000, \n           alpha = 0.8) +\n  geom_density(fill = \"red\",\n               color = \"red\",\n               alpha = 0.11) +\n  scale_x_continuous(breaks = seq(200000, 800000, by = 100000)) +\n  scale_y_continuous(labels = NULL) +\n  labs(title = 'Hist', x = 'SADT', y = 'Count') #+ \n#xlim(c(260000,780000))\n\n####---------------------------------------------------------\nlm(sadt ~ consulta, data = cai_SCn) %>% \n  summary()\n\nlm.cai_SCn <- lm(sadt ~consulta, data = cai_SCn)\n\ncai_SCn <- cai_SCn %>% add_predictions(lm.cai_SCn)\n\nggplot(cai_SCn, aes(y = consulta)) +\n  geom_point(aes(x = sadt, alpha = consulta, color = sadt), size = 3) +\n  geom_line(aes(x = pred),color = \"red\", size = 1.2)\n\nplot(lm.cai_SCn)\n\npredict.lm(lm.cai_SCn, level=0.95, interval = 'confidence')\n####---------------------------------------------------------\nfilter(org,componente == \"sadt\", amq == '20140101' | amq == '20140102') %>% \n  group_by(componente,internacao,amq) %>% \n  summarise(sum(quantidade))\n####---------------------------------------------------------\nnames(cai)\n\ncaiC.precor <- cai %>%\n  arrange(amq, internacao) %>% \n  group_by(amq) %>% \n  summarise(consulta = sum(consulta, na.rm = TRUE), \n            domiciliar = sum(domiciliar, na.rm = TRUE), \n            emergencia = sum(emergencia, na.rm = TRUE), \n            honorario = sum(honorario, na.rm = TRUE), \n            material = sum(material, na.rm = TRUE), \n            medicamento = sum(medicamento, na.rm = TRUE), \n            nulo = sum(nulo, na.rm = TRUE), \n            pacote = sum(pacote, na.rm = TRUE), \n            remocao = sum(remocao, na.rm = TRUE), \n            sadt = sum(sadt, na.rm = TRUE), \n            taxa = sum(taxa, na.rm = TRUE)) %>% \n  as.data.frame(.) %>%\n  select(-amq) %>% \n  as.tibble()\n\ncaiN.precor <- cai %>%\n  filter(internacao == 'n') %>% \n  arrange(amq) %>%   \n  group_by(amq) %>% \n  summarise(consulta = sum(consulta, na.rm = TRUE), \n            domiciliar = sum(domiciliar, na.rm = TRUE), \n            emergencia = sum(emergencia, na.rm = TRUE), \n            honorario = sum(honorario, na.rm = TRUE), \n            material = sum(material, na.rm = TRUE), \n            medicamento = sum(medicamento, na.rm = TRUE), \n            nulo = sum(nulo, na.rm = TRUE), \n            pacote = sum(pacote, na.rm = TRUE), \n            remocao = sum(remocao, na.rm = TRUE), \n            sadt = sum(sadt, na.rm = TRUE), \n            taxa = sum(taxa, na.rm = TRUE)) %>% \n  as.data.frame(.) %>%\n  select(-amq) %>% \n  as.tibble()\n\ncaiS.precor <- cai %>%\n  filter(internacao == 's') %>% \n  arrange(amq) %>% \n  group_by(amq) %>% \n  summarise(consulta = sum(consulta, na.rm = TRUE), \n            domiciliar = sum(domiciliar, na.rm = TRUE), \n            emergencia = sum(emergencia, na.rm = TRUE), \n            honorario = sum(honorario, na.rm = TRUE), \n            material = sum(material, na.rm = TRUE), \n            medicamento = sum(medicamento, na.rm = TRUE), \n            nulo = sum(nulo, na.rm = TRUE), \n            pacote = sum(pacote, na.rm = TRUE), \n            remocao = sum(remocao, na.rm = TRUE), \n            sadt = sum(sadt, na.rm = TRUE), \n            taxa = sum(taxa, na.rm = TRUE)) %>% \n  as.data.frame(.) %>%\n  select(-amq) %>% \n  as.tibble()\n\nrm(caiC.cor,caiS.cor,caiN.cor)\n\ncaiC.corP <- caiC.precor %>% \n  cor(., method = 'pearson');caiC.corP\n\ncaiN.corP <- caiN.precor %>% \n  cor(., method = 'pearson');caiN.corP\n\ncaiS.corP <- caiS.precor %>% \n  cor(., method = 'pearson');caiS.corP\n\nCcorgrid <- symnum(caiC.corP)\nNcorgrid <- symnum(caiN.corP)\nScorgrid <- symnum(caiS.corP)\n\ncaiC.corP[lower.tri(caiC.corP)] <- NA\ncaiN.corP[lower.tri(caiN.corP)] <- NA\ncaiS.corP[lower.tri(caiS.corP)] <- NA\n\nCcorgrid\nNcorgrid\nScorgrid\n\n####---------------------------------------------------------\n\nGGcorC <- ggplot(data = melt(caiC.corP, na.rm = TRUE), aes(Var2, Var1, fill = value))+\n  geom_tile(color = \"white\")+\n  scale_fill_distiller(palette = \"Spectral\", \n                       #trans = \"reverse\",\n                       #space = \"Lab\", \n                       name=\"Pearson\\nCorrelation\") +  \n  theme_minimal()+ \n  theme(axis.text.x = element_text(angle = 45, \n                                   vjust = 1, \n                                   size = 12, \n                                   hjust = 1),\n        axis.title.x = element_blank(),\n        axis.title.y = element_blank())+\n  guides(fill = guide_colorbar(barwidth = 1, \n                               barheight = 7,\n                               title.position = \"bottom\"))+\n  coord_fixed()\n\nGGcorC <- ggplot(data = melt(caiN.corP, na.rm = TRUE), aes(Var2, Var1, fill = value))+\n  geom_tile(color = \"white\")+\n  scale_fill_distiller(palette = \"Spectral\", \n                       #trans = \"reverse\",\n                       #space = \"Lab\", \n                       name=\"Pearson\\nCorrelation\") +  \n  theme_minimal()+ \n  theme(axis.text.x = element_text(angle = 45, \n                                   vjust = 1, \n                                   size = 12, \n                                   hjust = 1),\n        axis.title.x = element_blank(),\n        axis.title.y = element_blank())+\n  guides(fill = guide_colorbar(barwidth = 1, \n                               barheight = 7,\n                               title.position = \"bottom\"))+\n  coord_fixed()\n\nGGcorC <- ggplot(data = melt(caiS.corP, na.rm = TRUE), aes(Var2, Var1, fill = value))+\n  geom_tile(color = \"white\")+\n  scale_fill_distiller(palette = \"Spectral\", \n                       #trans = \"reverse\",\n                       #space = \"Lab\", \n                       name=\"Pearson\\nCorrelation\") +  \n  theme_minimal()+ \n  theme(axis.text.x = element_text(angle = 45, \n                                   vjust = 1, \n                                   size = 12, \n                                   hjust = 1),\n        axis.title.x = element_blank(),\n        axis.title.y = element_blank())+\n  guides(fill = guide_colorbar(barwidth = 1, \n                               barheight = 7,\n                               title.position = \"bottom\"))+\n  coord_fixed()\n\n?format\n\nGGcorC + \n  geom_text(aes(Var2, Var1, label = format(value, digits = 2, nsmall= 2)), \n            color = \"black\", \n            size = 3)# +\n####---------------------------------------------------------\n#  theme(\n#    axis.title.x = element_blank(),\n#    axis.title.y = element_blank(),\n#    panel.grid.major = element_blank(),\n#    panel.border = element_blank(),\n#    panel.background = element_blank(),\n#    axis.ticks = element_blank(),\n#    legend.justification = c(1, 0),\n#    legend.position = c(0.4, 0.77),\n#    legend.direction = \"horizontal\")+\n#  guides(fill = guide_colorbar(barwidth = 7, \n#                               barheight = 1,\n#                               title.position = \"top\", \n#                               title.hjust = 0.5))\n\n#scale_fill_gradient2(low = \"light blue\", \n#                     high = \"red\", \n#                     mid = \"blue\", \n#                     midpoint = 0.5, \n#                     limit = c(-0.1,1), \n#                     space = \"Lab\", \n#                     name=\"Pearson\\nCorrelation\") +\n####---------------------------------------------------------\nGGcorC\n####---------------------------------------------------------\n\ntopcorS <- melt(caiS.corP, na.rm = TRUE) %>% \n  filter((value >= 0.85 | ((Var1 == \"pacote\" | Var2 == \"pacote\") & value >= 0.70)) & value != 1) %>% \n  arrange(desc(value))\n\ntopcorN <- melt(caiN.corP, na.rm = TRUE) %>% \n  filter(value >= 0.85 & value != 1) %>% \n  arrange(desc(value))\n\nmelt(caiN.corP, na.rm = TRUE) %>% \n  filter(value >= 0.90 & value != 1) %>% \n  arrange(desc(value))\n\n####---------------------------------------------------------\nnames(dataset)\nresumo_valor_N <- dataset %>% \n  select(internacao = \"Indicador de Internação\", \n         componente = \"Componente assistencial\",\n         valor = \"Valor Total\",\n         percentual =  \"Valor Total.1\",\n         quantidade = \"Quantidade Aprovada\") %>% \n  mutate(percentual = as.numeric(format(percentual*100, digits = 2)))\n\nresumo_valor_S <- dataset2 %>% \n  select(internacao = \"Indicador de Internação\", \n         componente = \"Componente assistencial\",\n         valor = \"Valor Total\",\n         percentual =  \"Valor Total.1\",\n         quantidade = \"Quantidade Aprovada\") %>% \n  mutate(percentual = as.numeric(format(percentual*100, digits = 2)))\n\n#append tibbles\nresumo_valor <- rbind(resumo_valor_N,resumo_valor_S) %>% \n  arrange(internacao, desc(valor))\n\n# merge two data frames by ID and Country\n# total <- merge(data frameA,data frameB,by=c(\"ID\",\"Country\"))\n\n####---------------------------------------------------------\ndepara_componente\n\nnames(depara_componente)\n\ndepara_componente <- depara_componente %>% \n  select(componente = \"Componente assistencial\", comp = \"componente\")\n####---------------------------------------------------------\nresumo_valor_S <- merge(resumo_valor_S, depara_componente, by = \"componente\") %>% \n  mutate(componente = comp) %>% \n  select(-comp)\n\nresumo_valor_N <- merge(resumo_valor_N, depara_componente, by = \"componente\") %>% \n  mutate(componente = comp) %>% \n  select(-comp)\n####---------------------------------------------------------\ntopcorS\nresumo_valor_S\n\ntopcorN\nresumo_valor_N\n\n# lookup > lkupTable[match(valuesTable$Var, lkupTable$key),#response_index]\ntopcorS_W <- add_column(topcorS, var1_prct = resumo_valor_S[match(topcorS$Var1, resumo_valor_S$componente),4])\ntopcorS_W <- add_column(topcorS_W, var2_prct = resumo_valor_S[match(topcorS$Var2, resumo_valor_S$componente),4])\n\ntopcorN_W <- add_column(topcorN, var1_prct = resumo_valor_N[match(topcorN$Var1, resumo_valor_N$componente),4])\ntopcorN_W <- add_column(topcorN_W, var2_prct = resumo_valor_N[match(topcorN$Var2, resumo_valor_N$componente),4])\n\nnames(topcorS_W)\ntopcorS_W <- select(topcorS_W, \"Var1\",\"var1_prct\",\"Var2\",\"var2_prct\",\"value\")\ntopcorN_W <- select(topcorN_W, \"Var1\",\"var1_prct\",\"Var2\",\"var2_prct\",\"value\")\n\ntopcorS_W\ntopcorN_W\n####---------------------------------------------------------\n\nnames(cai)\n\ntopcorS_W\n\nlm(taxa ~ sadt, data = caiS.precor) %>% \n  summary()\nlm(sadt ~ taxa, data = caiS.precor) %>% \n  summary()\n\nView(caiS.precor)\n\nggplot(caiS.precor[1:77,], aes(taxa)) +\n  stat_bin(aes(y =..density..,\n               fill = ..count..), \n           col = \"black\",\n           binwidth = 2000, \n           alpha = 0.8) +\n  geom_density(fill = \"red\",\n               color = \"red\",\n               alpha = 0.11) +\n  scale_x_continuous(breaks = seq(200000, 800000, by = 100000)) +\n  scale_y_continuous(labels = NULL) +\n  labs(title = 'Hist', x = 'SADT', y = 'Count')\n\n####---------------------------------------------------------\n## Correlação Emergencia > Taxas em Internacao \nnames(cai_df)\n\ncai_ETs <- cai_df %>%\n  filter(internacao == \"s\") %>% \n  arrange(amq) %>% \n  select(taxa) %>% \n  as.tibble()\n\ncai_temp <- cai_df %>%\n  filter(internacao == \"n\") %>% \n  arrange(amq) %>% \n  select(emergencia) %>% \n  as.tibble()\n\ncai_ETs <- cai_ETs %>% add_column(emergencia = cai_temp$emergencia)\ncai_ETs <- cai_ETs[1:77,]\n\ncai_ETs.corP <- cai_ETs %>% \n  cor(., method = 'pearson');cai_ETs.corP\n\n## Correlação Consulta > Pacote em Internação\ncai_PsC <- cai_df %>%\n  filter(internacao == \"s\") %>% \n  arrange(amq) %>% \n  select(pacote) %>% \n  as.tibble()\n\ncai_temp <- cai_df %>%\n  filter(internacao == \"n\") %>% \n  arrange(amq) %>% \n  select(consulta) %>% \n  as.tibble()\n\ncai_PsC <- cai_PsC  %>% add_column(consulta = cai_temp$consulta)\ncai_PsC <- cai_PsC[1:77,]\n\ncai_PsC.corP <- cai_PsC %>% \n  cor(., method = 'pearson');cai_PsC.corP\n\ncai_PsC\n####---------------------------------------------------------\n## checking Z\nzPsC <- scale(cai_PsC$pacote, center = TRUE, scale = TRUE)\ncai_PsC <- cai_PsC %>% add_column(zp = zPsC[1:dim(cai_PsC)[1]])\n\nfilter(cai_PsC, abs(zc) > 2.5)\n\n####---------------------------------------------------------\n## fit model\nlm.ST<- lm(sadt ~ taxa, data = caiS.precor)\n\n## add fiited column\ncai_ST <- caiS.precor %>% add_predictions(lm.ST) #modelr lib\n\n## check model X scatter\nggplot(cai_ST, aes(y = taxa)) +\n  geom_point(aes(x = sadt), color = \"blue\", alpha = 0.5, size = 3) +\n  geom_line(aes(x = pred),color = \"red\", size = 1.2)\n\n## check model with the 4 standards\npar(mfrow = c(2,2), oma = c(0, 0, 1.1, 0))\nplot(lm.ST)\npar(mfrow = c(1,1), oma = c(0, 0, 0, 0))\n\nsummary(lm.ST)\n\nanv.ST <- anova(lm.ST)\n\nrm(lm.ST,cai_ST)\n## POOR MODEL ##\n####---------------------------------------------------------\n\n## fit model\nlm.PsC<- lm(pacote ~ consulta, data = cai_PsC)\n\n## add fiited column\ncai_PsC <- cai_PsC %>% add_predictions(lm.PsC) #modelr lib\n\n## check model X scatter\nggplot(cai_PsC, aes(y = consulta)) +\n  geom_point(aes(x = pacote), color = \"blue\", alpha = 0.5, size = 3) +\n  geom_line(aes(x = pred),color = \"red\", size = 1.2)\n\n## check model with the 4 standards\npar(mfrow = c(2,2), oma = c(0, 0, 1.1, 0))\nplot(lm.PsC)\npar(mfrow = c(1,1), oma = c(0, 0, 0, 0))\n\nsummary(lm.PsC)\n\nqcc(cai_PsC$pacote, type = 'xbar.one', newdata = fitted(lm.PsC))\n\nggplot(cai_PsC, aes(pred)) +\n  stat_bin(aes(y =..density..,\n               fill = ..count..), \n           col = \"black\",\n           binwidth = 700, \n           alpha = 0.8) +\n  geom_density(fill = \"red\",\n               color = \"red\",\n               alpha = 0.11) +\n  scale_x_continuous(breaks = seq(200000, 800000, by = 100000)) +\n  scale_y_continuous(labels = NULL) +\n  labs(title = 'Hist', x = 'consulta', y = 'Count')\n\ncai_PsC\n\n####---------------------------------------------------------\nresumo_valor %>% \n  group_by(componente) %>% \n  summarise(valor = sum(valor)) %>% \n  arrange(desc(valor))\n\nresumo_valor\n\n####---------------------------------------------------------\nmtcars %>%\n  split(.$cyl) %>% # from base R\n  map(~ lm(mpg ~ wt, data = .)) %>%\n  map(summary) %>%\n  map_dbl(\"r.squared\")\n\nas.tibble(mtcars)\n####---------------------------------------------------------\ncai_ECn_PTs <- cai_df %>%\n  filter(internacao == \"s\") %>% \n  arrange(amq) %>% \n  select(taxa) %>% \n  as.tibble()\n\ncai_temp <- cai_df %>%\n  filter(internacao == \"n\") %>% \n  arrange(amq) %>% \n  select(emergencia) %>% \n  as.tibble()\n\ncai_ECn_PTs <- cai_ECn_PTs %>% add_column(emergencia = cai_temp$emergencia)\n\ncai_temp <- cai_df %>%\n  filter(internacao == \"n\") %>% \n  arrange(amq) %>% \n  select(consulta) %>% \n  as.tibble()\n\ncai_ECn_PTs <- cai_ECn_PTs %>% add_column(consulta = cai_temp$consulta)\n\ncai_temp <- cai_df %>%\n  filter(internacao == \"s\") %>% \n  arrange(amq) %>% \n  select(pacote) %>% \n  as.tibble()\n\ncai_ECn_PTs <- cai_ECn_PTs %>% add_column(pacote = cai_temp$pacote)\ncai_ECn_PTs <- cai_ECn_PTs[1:77,]\n\ncai_ECn_PTs.corP <- cai_ECn_PTs %>% \n  cor(., method = 'pearson');cai_ECn_PTs.corP\n\n",
    "created" : 1500075343859.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3005170119",
    "id" : "453CEFE8",
    "lastKnownWriteTime" : 1500731426,
    "last_content_update" : 1500731426242,
    "path" : "~/Estudo_Componente_Geral/Analise_Componente_Atend.R",
    "project_path" : "Analise_Componente_Atend.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}